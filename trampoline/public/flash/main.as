package  {		import flash.display.MovieClip;	import flash.events.Event;	import flash.events.KeyboardEvent;	import flash.external.ExternalInterface;	import com.*;		public class main extends MovieClip {				var keys:Object = {			65: 'left', //a			68: 'right', //s			87: 'up', //w			83: 'down' //s		};				var commands:Object ={			left: false,			right: false,			up: false,			down: false		}				var gravity:int = 20;		var trampolines:Array = [];		var men = [];				var man = new Man();				public function main() {			stage.addChildAt( man, 0 );			man.velocity.x = 10;						stage.addEventListener(Event.ENTER_FRAME, loop );			stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDown);			stage.addEventListener(KeyboardEvent.KEY_UP, keyUp);						trampolines = [trampoline1, trampoline2, trampoline3];			men = [man, man2, man3];						ExternalInterface.call("javascript_function");		}				private function keyDown(e){			trace(e.keyCode, keys[e.keyCode] );			commands[ keys[e.keyCode] ] = true;		}				private function keyUp(e){			commands[ keys[e.keyCode] ] = false;		}				private function loop(e) {			if( commands['left'] ){				man.velocity.x -= 2;				ExternalInterface.call("go_left");			}						if( commands['right'] ){				man.velocity.x += 2;				ExternalInterface.call("go_right");			}						for each(var player:Man in men ){				player.loop();							//bounce off trampolines				var bounced = false;				for each( var tramp:Trampoline in trampolines ){					if (player.hitTestObject(tramp)){						player.velocity.y = 45;						player.bounce();						bounced = true;					}				}								//hit lava				if( !bounced && player.hitTestObject(lava)){					if( player.takeDamage(10) ){						player.velocity.y = 0;					}else{						player.velocity.y = 51;					}				}								// bounce off opponents				for each( var opp:Man in men ){					if( opp != player ){						if (player.hitTestObject(opp)){							opp.velocity.x = player.velocity.x*1.5;							player.velocity.x = -player.velocity.x/2;													}					}				}							}											manHealth.text = man.health;					}	}	}